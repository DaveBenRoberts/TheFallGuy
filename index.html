<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fall Guy</title>

<style>
html, body{
    height:100% !important;
    min-height:100%;
	width:100%;
    margin:0;
    padding:0;
}
.universe{
width:100%;
height:100%;
position:relative;
}
.bg{
    width:100% !important;
    height:100% !important;
    background: #fff url(bg.jpg) repeat-y 0 0;
    display:block;
    overflow:auto;
    background-attachment: fixed;
}
#bg-image{
    height:9000px;
    width:100%;
    margin:0 auto;

}
.theguy{
position:fixed;
width:100%;
margin:0 auto;
font-size:3em;
color:#000;
z-index:1;
margin-top:20%;
}
.theguy img{
    width:280px;
}

</style>
</head>

<body>

<div class="theguy"><img src="http://clt-envirolaw.com/wp-content/uploads/2012/08/guy.png" class="guyImg"/></div>
<div class="universe" id ="universe-a">
	<img id="bg-image" src="bg.jpg"/>
</div>

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
 <script type="text/javascript" src="js/stellar.js"></script>

<script type="text/javascript">
$(document).ready(function(){
    var guyHeight = $(".guyImg").height()/2;
    var guyWidth = $(".guyImg").width()/2;

    $(".theguy").css({'bottom':$(window).height()/2 - guyHeight, 'left':$(window).width()/2 - guyWidth});

    $('.bg').stellar();
    var scrolled = 0;
    var universeType = true;
    var img = '';
    var prevImg;
    var interval = setInterval(function(){
        //alert();
        scrolled += 100;
        scrollBy(0,100);
        //alert(scrolled +' and '+$("#bg-image").height());
        if(scrolled >= $("#bg-image").height()){
            //alert("End: "+ scrolled);
            //clearInterval(interval);
            scrolled = 0;
            if(universeType){
                 img += '<div class="universe" id=universe-b><img id="bg-image" src="bg.jpg"/></div>';
                 universeType = !universeType;
                 prevImg = '#universe-a';
            }else{
                  img += '<div class="universe" id=universe-a><img id="bg-image" src="bg.jpg"/></div>';
                universeType = !universeType;
                prevImg = '#universe-b';

            }
           
            $("body").append(img);
            img = '';
            $(prevImg).remove();
            //alert();
            $(window).scrollTop(0);
        }
    },100)

});

$('.bg').scroll(function() {
    var x = $(this).scrollTop();
    $(this).css('background-position', '10% ' + parseInt(-x / 10) + 'px');
});
</script>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fall Guy</title>

<style>
html, body{
    height:100%;
    min-height:100%;
	width:100%;
    margin:0;
    padding:0;
}
.bg{
    width:100%;
    height:100%;
    background: #fff url(bg.jpg) no-repeat fixed 0 0;
    overflow:auto;
    background-attachment: fixed;
}

</style>
</head>

<body>
<div class="bg" data-stellar-background-ratio="0.5">
   <span>Fall Guy</span>
</div>

<div class="universe" id ="universe-a">
	<img id="bg-image" src="bg.jpg" height="100%"/>
</div>

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
 <script type="text/javascript" src="js/stellar.js"></script>

<script type="text/javascript">
$(document).ready(function(){
    $('.bg').stellar();
    var scrolled = 0;
    var universeType = true;
    var img = '';
    var prevImg;
    var interval = setInterval(function(){
        //alert();
        scrolled += 50;
        scrollBy(0,50);
        //alert(scrolled +' and '+$("#bg-image").height());
        if(scrolled >= $("#bg-image").height()){
            //alert("End");
            //clearInterval(interval);
            scrolled = 0;
            if(universeType){
                 img += '<div class="universe" id=universe-b><img id="bg-image" src="bg.jpg" height="100%"/></div>';
                 universeType = !universeType;
                 prevImg = '#universe-a';
            }else{
                  img += '<div class="universe" id=universe-a><img id="bg-image" src="bg.jpg" height="100%"/></div>';
                universeType = !universeType;
                prevImg = '#universe-b';

            }
           
            $("body").append(img);
            img = '';
            $(prevImg).remove();
            //alert();
            $(window).scrollTop(0);
        }
    },100)

});

$('.bg').scroll(function() {
    var x = $(this).scrollTop();
    $(this).css('background-position', '10% ' + parseInt(-x / 10) + 'px');
});
</script>
</body>
</html>
